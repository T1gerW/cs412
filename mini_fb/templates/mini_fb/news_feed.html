{% extends 'mini_fb/base.html' %}

{% block title %}News Feed{% endblock %}

{% block content %}
    <h2>News Feed for {{ profile.first_name }} {{ profile.last_name }}</h2>

    <ul class="news-feed-list">
        {% for status in news_feed %}
            <li class="news-feed-item">
                <div class="status-header">
                    <!-- Profile image and name of the person who wrote the status -->
                    {% if status.profile.profile_image_url %}
                        <img src="{{ status.profile.profile_image_url }}" alt="{{ status.profile.first_name }}'s Profile Picture" width="50" height="50">
                    {% else %}
                        <img src="https://via.placeholder.com/50" alt="No Profile Picture" width="50" height="50">
                    {% endif %}
                    <p><strong>{{ status.profile.first_name }} {{ status.profile.last_name }}</strong></p>
                </div>

                <!-- Status message content -->
                <p><strong>{{ status.timestamp }}</strong>: {{ status.message }}</p>

                <!-- Display images associated with the status, if any -->
                {% if status.get_images %}
                    <div class="status-images">
                        {% for img in status.get_images %}
                            <img src="{{ img.image_file.url }}" alt="Status Image" width="100" height="100">
                        {% endfor %}
                    </div>
                {% endif %}
            </li>
        {% empty %}
            <li>No status messages to display.</li>
        {% endfor %}
    </ul>

    <!-- Link back to the profile page -->
    <a href="{% url 'show_profile'%}" class="btn btn-secondary">Back to Profile</a>
{% endblock content %}
